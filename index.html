<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ –§–∏–Ω–∞–Ω—Å—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="header-top">
                <h1><i class="fas fa-wallet"></i> –§–∏–Ω–∞–Ω—Å—ã</h1>
                <div class="user-info" id="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="user-name">–í—ã</span>
                </div>
            </div>
            
            <div class="balance-card">
                <div class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div class="balance-amount" id="total-balance">0 ‚ÇΩ</div>
                <div class="period-tabs">
                    <button class="period-tab active" onclick="setPeriod('day')">–î–µ–Ω—å</button>
                    <button class="period-tab" onclick="setPeriod('month')">–ú–µ—Å—è—Ü</button>
                    <button class="period-tab" onclick="setPeriod('all')">–í—Å–µ</button>
                </div>
            </div>
        </header>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <div class="quick-menu">
            <button class="menu-btn income" onclick="openIncomeModal()">
                <i class="fas fa-plus-circle"></i>
                <span>–î–æ—Ö–æ–¥</span>
            </button>
            <button class="menu-btn expense" onclick="openExpenseModal()">
                <i class="fas fa-minus-circle"></i>
                <span>–†–∞—Å—Ö–æ–¥</span>
            </button>
            <button class="menu-btn categories" onclick="openCategoriesModal()">
                <i class="fas fa-tags"></i>
                <span>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
            </button>
            <button class="menu-btn users" onclick="openUsersModal()">
                <i class="fas fa-users"></i>
                <span>–õ—é–¥–∏</span>
            </button>
            <button class="menu-btn stats" onclick="showStats()">
                <i class="fas fa-chart-pie"></i>
                <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
            <button class="menu-btn history" onclick="showAllTransactions()">
                <i class="fas fa-history"></i>
                <span>–ò—Å—Ç–æ—Ä–∏—è</span>
            </button>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <section class="section">
            <div class="section-title">
                <h2><i class="fas fa-folder-open"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                <button class="text-btn" onclick="openCategoriesModal()">–£–ø—Ä–∞–≤–ª—è—Ç—å</button>
            </div>
            <div class="categories-list" id="categories-list">
                <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
        </section>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <section class="section">
            <div class="section-title">
                <h2><i class="fas fa-receipt"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
                <button class="text-btn" onclick="showAllTransactions()">–í—Å–µ</button>
            </div>
            <div class="transactions" id="transactions">
                <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
        </section>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
        <button class="fab" onclick="openIncomeModal()">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="income-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</h3>
                <button class="close-btn" onclick="closeModal('income-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚ÇΩ)</label>
                    <input type="number" id="income-amount" placeholder="10000" min="1" class="form-input">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <input type="text" id="income-description" placeholder="–ó–∞—Ä–ø–ª–∞—Ç–∞, –∞–≤–∞–Ω—Å..." class="form-input">
                </div>
                <div class="form-group">
                    <label>–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ</label>
                    <select id="income-distribution" class="form-select" onchange="toggleCategorySelect()">
                        <option value="all">–í—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ø–æ—Ä–æ–≤–Ω—É</option>
                        <option value="percent">–ü–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º (—à–∞–±–ª–æ–Ω)</option>
                        <option value="specific">–í –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                    </select>
                </div>
                <div id="category-select-container" style="display: none;">
                    <select id="income-category" class="form-select">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </select>
                </div>
                <button class="btn btn-primary btn-block" onclick="addIncome()">
                    <i class="fas fa-check-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="expense-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-minus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h3>
                <button class="close-btn" onclick="closeModal('expense-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚ÇΩ)</label>
                    <input type="number" id="expense-amount" placeholder="5000" min="1" class="form-input">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <input type="text" id="expense-description" placeholder="–ü—Ä–æ–¥—É–∫—Ç—ã, –±–µ–Ω–∑–∏–Ω..." class="form-input">
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="expense-category" class="form-select">
                        <!-- –ó–∞–ø–æ–ª–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </select>
                </div>
                <div class="form-group">
                    <label>–í–∑—è—Ç—å –¥–µ–Ω—å–≥–∏ –∏–∑</label>
                    <select id="expense-source" class="form-select">
                        <option value="specific">–¢–æ–ª—å–∫–æ –∏–∑ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        <option value="all">–°–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ—Ä–æ–≤–Ω—É</option>
                    </select>
                </div>
                <div class="alert" id="expense-alert" style="display: none;"></div>
                <button class="btn btn-danger btn-block" onclick="addExpense()">
                    <i class="fas fa-check-circle"></i> –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="categories-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-tags"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h3>
                <button class="close-btn" onclick="closeModal('categories-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="categories-manage" id="categories-manage">
                    <!-- –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                </div>
                <div class="form-group">
                    <label>–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <div class="input-group">
                        <input type="text" id="new-category-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" class="form-input">
                        <input type="color" id="new-category-color" value="#4361ee" class="form-color">
                        <button class="btn btn-primary" onclick="addNewCategory()">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                <div class="percent-manager" id="percent-manager">
                    <!-- –ü—Ä–æ—Ü–µ–Ω—Ç—ã -->
                </div>
                <button class="btn btn-primary btn-block" onclick="savePercentages()">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç—ã
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="users-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-users"></i> –£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
                <button class="close-btn" onclick="closeModal('users-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="users-list" id="users-list">
                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                </div>
                <div class="form-group">
                    <label>–î–æ–±–∞–≤–∏—Ç—å –ø–æ @username</label>
                    <div class="input-group">
                        <input type="text" id="new-username" placeholder="@username" class="form-input">
                        <button class="btn btn-primary" onclick="addNewUser()">
                            <i class="fas fa-user-plus"></i> –î–æ–±–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
                <div class="info-box">
                    <i class="fas fa-info-circle"></i>
                    <p>–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å –±–∞–ª–∞–Ω—Å—ã –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å @username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
